"use strict";function doAJAX(e,t,s){if(window.fetch)fetch(e.url,{method:e.method,headers:e.headers,redirect:"follow",body:e.body}).then(function(a){a.text().then(function(i){var r={status:a.status,headers:{},body:i};if(a.headers.forEach(function(e,t){r.headers[t]=e}),r.status>=400){if(void 0===s)throw Error(e.url+" is unavailable with status "+r.status+".");s(r)}else t(r)})});else if(window.XMLHttpRequest){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(this.readyState===this.DONE){var i={status:this.status,headers:{},body:this.responseText};if(this.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach(function(e){var t=e.split(": "),s=t.shift(),a=t.join(": ");i.headers[s]=a}),i.status>=400){if(void 0===s)throw Error(e.url+" is unavailable with status "+i.status+".");s(i)}else if(i.status>=300&&i.status<400){var r=JSON.parse(JSON.stringify(e));r.url=i.headers.location,doAJAX(r,t,s)}else t(i);a.open(e.method,e.url,!0),void 0!==e.headers&&e.headers.keys.forEach(function(t){a.setRequestHeader(t,e.headers[t])}),a.send()}}}else throw Error("No AJAX API available in this browser")}
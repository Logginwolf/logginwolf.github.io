"use strict";function doAJAX(e,t,s){if(window.fetch)fetch(e.url,{method:e.method,headers:e.headers,redirect:"follow",body:e.body}).then((function(r){r.text().then((function(a){var i={status:r.status,headers:{},body:a};if(r.headers.forEach((function(e,t){i.headers[t]=e})),i.status>=400){if(void 0===s)throw new Error(e.url+" is unavailable with status "+i.status+".");s(i)}else t(i)}))}));else{if(!window.XMLHttpRequest)throw new Error("No AJAX API available in this browser");var r=new XMLHttpRequest;r.onreadystatechange=function(){if(this.readyState===this.DONE){var a={status:this.status,headers:{},body:this.responseText};if(this.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach((function(e){var t=e.split(": "),s=t.shift(),r=t.join(": ");a.headers[s]=r})),a.status>=400){if(void 0===s)throw new Error(e.url+" is unavailable with status "+a.status+".");s(a)}else if(a.status>=300&&a.status<400){var i=JSON.parse(JSON.stringify(e));i.url=a.headers.location,doAJAX(i,t,s)}else t(a);r.open(e.method,e.url,!0),void 0!==e.headers&&e.headers.keys.forEach((function(t){r.setRequestHeader(t,e.headers[t])}));var o=null;void 0!==typeof e.body&&(o=e.body),r.send(o)}}}}